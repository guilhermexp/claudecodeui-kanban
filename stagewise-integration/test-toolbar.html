<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Stagewise Toolbar</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: #f5f5f5;
    }
    
    #user-app-iframe {
      width: 100%;
      height: 100vh;
      border: none;
      background: white;
    }
    
    #stagewise-toolbar-app {
      position: fixed;
      z-index: 999999;
    }
  </style>
</head>
<body>
  <!-- Iframe onde o app do usuário será carregado -->
  <iframe 
    id="user-app-iframe" 
    src="http://localhost:5173"
    title="User Application">
  </iframe>

  <!-- Container do Stagewise toolbar -->
  <div id="stagewise-toolbar-app"></div>

  <!-- Import map to resolve module imports -->
  <script type="importmap">
  {
    "imports": {
      "@stagewise/toolbar/config": "http://localhost:5555/toolbar/config.js"
    }
  }
  </script>
  
  <script type="module">
    // Log to see if module scripts are working
    console.log('Test toolbar loading...');
    
    // Set up config on window
    window.stagewiseConfig = {
      agentInterface: {
        wsUrl: 'ws://localhost:3456/ws',
        httpUrl: 'http://localhost:3456'
      },
      plugins: [],
      devAppPort: 5173,
      appPort: 5173
    };
    
    // Try to import the toolbar
    import('http://localhost:5555/toolbar/index.js')
      .then(() => {
        console.log('Toolbar loaded successfully!');
      })
      .catch(err => {
        console.error('Failed to load toolbar:', err);
      });
  </script>
  
  <!-- CSS do toolbar -->
  <link rel="stylesheet" href="http://localhost:5555/toolbar/toolbar.css">
</body>
</html>